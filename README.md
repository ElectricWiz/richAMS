# Simulation Project

## Overview
This project simulates the RICH detector aboard the AMS-02 experiment using Geant4. It includes scripts for data analysis and visualization.

## Prerequisites
- Geant4 toolkit
- CMake (version 2.6 or higher)
- GNU Make
- Python (for data analysis scripts)
- ROOT (for handling ROOT files in data analysis)

## Compilation

1. **Navigate to the build directory:**
    ```sh
    cd build
    ```

2. **Run CMake to configure the project:**
    ```sh
    cmake ..
    ```

3. **Compile the project using Make:**
    ```sh
    make
    ```

## Running the Simulation

1. **Navigate to the build directory:**
    ```sh
    cd build
    ```

2. **Run the simulation executable with the provided macro file:**
    ```sh
    ./sim vis.mac
    ```

## Macro Files for General Particle Sources in Geant4

Macro files are used to define the simulation environment and control the execution of the simulation. Here are some basic commands:

- **Define a particle source:**
    ```
    /gps/particle proton
    /gps/energy 1 GeV
    /gps/position 0 0 0 cm
    ```

- **Run the simulation for a number of events:**
    ```
    /run/beamOn 1000
    ```

- **Set visualization options:**
    ```
    /vis/open OGL
    /vis/drawVolume
    /vis/viewer/set/viewpointThetaPhi 90 180
    /vis/scene/add/trajectories
    /vis/scene/endOfEventAction accumulate
    ```

## Scripts and Data Analysis

### Data Analysis

The data analysis scripts are located in the [`dataAnalisis`](command:_github.copilot.openRelativePath?%5B%7B%22scheme%22%3A%22file%22%2C%22authority%22%3A%22%22%2C%22path%22%3A%22%2Fhome%2Felectricwiz%2FrichAMS%2FdataAnalisis%22%2C%22query%22%3A%22%22%2C%22fragment%22%3A%22%22%7D%5D "/home/electricwiz/richAMS/dataAnalisis") directory. They are primarily Jupyter notebooks and Python scripts that process the simulation output using PyROOT. The data is stored in n-tuples within ROOT files.

- **DataAnalisis.ipynb**: This notebook processes the ROOT files generated by the simulation. It reads the data in chunks to handle large files efficiently and converts them into Pandas DataFrames for analysis.

- **ConvRich.ipynb**: This notebook contains convolutional neural network models for analyzing the simulation data.

### Example Data Analysis Workflow

1. **Open the Jupyter notebook:**
    ```sh
    jupyter notebook dataAnalisis/DataAnalisis.ipynb
    ```

2. **Run the cells to process the ROOT files and analyze the data.**

## Conclusion

This README provides a basic overview of how to compile, run, and analyze the simulation data. For more detailed information, refer to the individual scripts and notebooks in the [`dataAnalisis`](command:_github.copilot.openRelativePath?%5B%7B%22scheme%22%3A%22file%22%2C%22authority%22%3A%22%22%2C%22path%22%3A%22%2Fhome%2Felectricwiz%2FrichAMS%2FdataAnalisis%22%2C%22query%22%3A%22%22%2C%22fragment%22%3A%22%22%7D%5D "/home/electricwiz/richAMS/dataAnalisis") directory.